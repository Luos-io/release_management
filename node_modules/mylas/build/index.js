"use strict";var ie=(e,t)=>()=>(e&&(t=e(e=0)),t);var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var a=ie(()=>{});var m=d(S=>{"use strict";a();Object.defineProperty(S,"__esModule",{value:!0});S.Method=void 0;var ue;(function(e){e[e.loadFile=0]="loadFile",e[e.saveFile=1]="saveFile",e[e.loadJson=2]="loadJson",e[e.loadJsonComments=3]="loadJsonComments",e[e.saveJson=4]="saveJson",e[e.loadBuffer=5]="loadBuffer",e[e.saveBuffer=6]="saveBuffer"})(ue=S.Method||(S.Method={}))});var D=d(n=>{"use strict";a();var I=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});n.checkPerm=n.checkPath=n.checkDir=n.checkPathSync=void 0;var c=I(require("fs")),$=I(require("path")),ne=e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):(0,n.checkDir)(e)==!0;n.checkPathSync=ne;var oe=e=>{let t=$.default.parse(e),r=t.dir;return r==""||c.default.existsSync(r)||c.default.mkdirSync(t.dir,{recursive:!0}),!!c.default.existsSync(r)};n.checkDir=oe;var le=async e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):!((0,n.checkDir)(e)!=!0||await(0,n.checkPerm)(e)!=!0);n.checkPath=le;var ce=async e=>{let t=$.default.parse(e);return c.default.existsSync(e)&&await c.default.promises.access(e,c.default.constants.R_OK|c.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),await c.default.promises.access(t.dir,c.default.constants.R_OK|c.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),!0};n.checkPerm=ce});var J=d(P=>{"use strict";a();var fe=P&&P.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(r[s[u]]=e[s[u]]);return r};Object.defineProperty(P,"__esModule",{value:!0});var de=require("worker_threads"),ve=e=>{var{callback:t}=e,r=fe(e,["callback"]);return new Promise((s,u)=>{let l;new de.Worker("./build/worker.js").once("message",o=>l=o).once("exit",o=>o==0?s(l):u(o)).once("error",o=>u(o)).once("messageerror",o=>u(o)).postMessage(r)}).then(s=>(t==null||t(s),s),s=>{throw new Error(s)})};P.default=ve});var H=d(O=>{"use strict";a();var R=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});var K=R(require("fs")),L=m(),z=D(),G=R(J()),_e={load:async(e,t)=>{if(await(0,z.checkPath)(e)==!0){let r=await K.default.promises.readFile(e);return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,z.checkPath)(e)==!0)await K.default.promises.writeFile(e,t),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:async(e,t)=>{let r=await(0,G.default)({method:L.Method.loadBuffer,path:e});return t==null||t(Buffer.from(r)),Buffer.from(r)},saveW:async(e,t,r)=>{let s=new Uint8Array(new SharedArrayBuffer(t.byteLength));s.set(t),await(0,G.default)({method:L.Method.saveBuffer,path:e,data:s,callback:r})}};O.default=_e});var F=d(p=>{"use strict";a();var Q=p&&p.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(p,"__esModule",{value:!0});var W=Q(require("fs")),T=m(),C=D(),V=Q(J()),he={loadS:e=>{if((0,C.checkPathSync)(e)==!0)return W.default.readFileSync(e,"utf8");throw new Error(`Can't read from ${e}`)},saveS:(e,t)=>{if((0,C.checkPathSync)(e)==!0)W.default.writeFileSync(e,t,"utf8");else throw new Error(`Can't write to ${e}`)},load:async(e,t)=>{if(await(0,C.checkPath)(e)==!0){let r=await W.default.promises.readFile(e,"utf8");return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,C.checkPath)(e)==!0)await W.default.promises.writeFile(e,t,"utf8"),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:(e,t)=>(0,V.default)({method:T.Method.loadFile,path:e,callback:t}),saveW:(e,t,r)=>(0,V.default)({method:T.Method.saveFile,path:e,data:t,callback:r})};p.default=he});var U=d(k=>{"use strict";a();var X=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k,"__esModule",{value:!0});var E=m(),y=X(F()),Y=X(J()),ye={loadS:(e,t=!1)=>JSON.parse(t?Z(y.default.loadS(e)):y.default.loadS(e)),saveS:(e,t)=>y.default.saveS(e,JSON.stringify(t)),load:async(e,t,r=!1)=>{let s=JSON.parse(r?Z(await y.default.load(e)):await y.default.load(e));return t==null||t(s),s},save:async(e,t,r)=>{await y.default.save(e,JSON.stringify(t)),r==null||r()},loadW:(e,t,r=!1)=>(0,Y.default)({method:r?E.Method.loadJsonComments:E.Method.loadJson,path:e,callback:t}),saveW:(e,t,r)=>(0,Y.default)({method:E.Method.saveJson,path:e,data:t,callback:r})};k.default=ye;function Z(e){let t=(i,h)=>{let M=0;for(;i[h]==="\\";)h--,M++;return!(M%2)},r=!1,s=!1,u=!1,l=0,o="";for(let i=0;i<e.length;i++){let h=e[i]||"",M=e[i+1]||"",B=!(u||s);if(B&&h==='"'&&t(e,i-1)&&(r=!r),r)continue;let g=h+M;if(B&&g==="//")o+=e.slice(l,i),l=i,s=!0,i++;else if(s&&g===`\r
`){i++,s=!1,l=i;continue}else if(s&&h===`
`)s=!1,l=i;else if(B&&g==="/*"){o+=e.slice(l,i),l=i,u=!0,i++;continue}else if(u&&g==="*/"){i++,u=!1,l=i+1;continue}}return(o+(u||s?"":e.slice(l))).replace(/,(?!\s*?[{["'\w])/g,"")}});var x=d(q=>{"use strict";a();var we=q&&q.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q,"__esModule",{value:!0});var _=we(require("fs")),b=D(),Se={mkS:e=>{(0,b.checkPathSync)(e)&&_.default.mkdirSync(e,{recursive:!0})},rmS:e=>{(0,b.checkPathSync)(e)&&(process.versions.node.startsWith("12")?_.default.rmdirSync(e,{recursive:!0}):_.default.rmSync(e,{recursive:!0,force:!0}))},checkS:e=>_.default.existsSync(e),mk:async(e,t)=>{await(0,b.checkPath)(e)&&await _.default.promises.mkdir(e,{recursive:!0}),t==null||t()},rm:async(e,t)=>{await(0,b.checkPath)(e)&&(process.versions.node.startsWith("12")?await _.default.promises.rmdir(e,{recursive:!0}):await _.default.promises.rm(e,{recursive:!0,force:!0})),t==null||t()},check:async(e,t)=>{let r=_.default.existsSync(e);return t==null||t(r),r}};q.default=Se});var te=d(j=>{"use strict";a();var ee=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j,"__esModule",{value:!0});var f=ee(F()),w=ee(U());String.load=f.default.load;String.save=f.default.save;String.loadS=f.default.loadS;String.saveS=f.default.saveS;String.loadW=f.default.loadW;String.saveW=f.default.saveW;String.prototype.save=async function(e,t){await f.default.save(e,String(this),t)};String.prototype.saveS=function(e){f.default.saveS(e,String(this))};String.prototype.saveW=async function(e,t){await f.default.saveW(e,String(this),t)};JSON.load=w.default.load;JSON.save=w.default.save;JSON.loadS=w.default.loadS;JSON.saveS=w.default.saveS;JSON.loadW=w.default.loadW;JSON.saveW=w.default.saveW});a();var N=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.Method=exports.Buf=exports.File=exports.Dir=exports.Json=void 0;var re=N(H());exports.Buf=re.default;var A=N(F());exports.File=A.default;var se=N(U());exports.Json=se.default;var ae=N(x());exports.Dir=ae.default;te();var me=Object.assign({json:se.default,file:A.default,dir:ae.default,buf:re.default},A.default);exports.default=me;var Pe=m();Object.defineProperty(exports,"Method",{enumerable:!0,get:function(){return Pe.Method}});
